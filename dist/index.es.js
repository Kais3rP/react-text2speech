import t,{useContext as e,useRef as n,useReducer as r,useEffect as s,useState as i,useCallback as o,useMemo as a}from"react";import l from"events";var c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},h=t.createContext&&t.createContext(c),u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},u.apply(this,arguments)},d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n};function p(e){return e&&e.map((function(e,n){return t.createElement(e.tag,u({key:n},e.attr),p(e.child))}))}function m(e){return function(n){return t.createElement(g,u({attr:u({},e.attr)},n),p(e.child))}}function g(e){var n=function(n){var r,s=e.attr,i=e.size,o=e.title,a=d(e,["attr","size","title"]),l=i||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",u({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,a,{className:r,style:u(u({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==h?t.createElement(h.Consumer,null,(function(t){return n(t)})):n(c)}function x(t){return m({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M517.6 273.5L230.2 499.3a16.14 16.14 0 0 0 0 25.4l287.4 225.8c10.7 8.4 26.4.8 26.4-12.7V286.2c0-13.5-15.7-21.1-26.4-12.7zm320 0L550.2 499.3a16.14 16.14 0 0 0 0 25.4l287.4 225.8c10.7 8.4 26.4.8 26.4-12.7V286.2c0-13.5-15.7-21.1-26.4-12.7zm-620-25.5h-51.2c-3.5 0-6.4 2.7-6.4 6v516c0 3.3 2.9 6 6.4 6h51.2c3.5 0 6.4-2.7 6.4-6V254c0-3.3-2.9-6-6.4-6z"}}]})(t)}function y(t){return m({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M793.8 499.3L506.4 273.5c-10.7-8.4-26.4-.8-26.4 12.7v451.6c0 13.5 15.7 21.1 26.4 12.7l287.4-225.8a16.14 16.14 0 0 0 0-25.4zm-320 0L186.4 273.5c-10.7-8.4-26.4-.8-26.4 12.7v451.5c0 13.5 15.7 21.1 26.4 12.7l287.4-225.8c4.1-3.2 6.2-8 6.2-12.7 0-4.6-2.1-9.4-6.2-12.6zM857.6 248h-51.2c-3.5 0-6.4 2.7-6.4 6v516c0 3.3 2.9 6 6.4 6h51.2c3.5 0 6.4-2.7 6.4-6V254c0-3.3-2.9-6-6.4-6z"}}]})(t)}function v(t){return m({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-80 600c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm224 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304z"}}]})(t)}function _(t){return m({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm144.1 454.9L437.7 677.8a8.02 8.02 0 0 1-12.7-6.5V353.7a8 8 0 0 1 12.7-6.5L656.1 506a7.9 7.9 0 0 1 0 12.9z"}}]})(t)}function b(t){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 16c1.671 0 3-1.331 3-3s-1.329-3-3-3-3 1.331-3 3 1.329 3 3 3z"}},{tag:"path",attr:{d:"M20.817 11.186a8.94 8.94 0 0 0-1.355-3.219 9.053 9.053 0 0 0-2.43-2.43 8.95 8.95 0 0 0-3.219-1.355 9.028 9.028 0 0 0-1.838-.18V2L8 5l3.975 3V6.002c.484-.002.968.044 1.435.14a6.961 6.961 0 0 1 2.502 1.053 7.005 7.005 0 0 1 1.892 1.892A6.967 6.967 0 0 1 19 13a7.032 7.032 0 0 1-.55 2.725 7.11 7.11 0 0 1-.644 1.188 7.2 7.2 0 0 1-.858 1.039 7.028 7.028 0 0 1-3.536 1.907 7.13 7.13 0 0 1-2.822 0 6.961 6.961 0 0 1-2.503-1.054 7.002 7.002 0 0 1-1.89-1.89A6.996 6.996 0 0 1 5 13H3a9.02 9.02 0 0 0 1.539 5.034 9.096 9.096 0 0 0 2.428 2.428A8.95 8.95 0 0 0 12 22a9.09 9.09 0 0 0 1.814-.183 9.014 9.014 0 0 0 3.218-1.355 8.886 8.886 0 0 0 1.331-1.099 9.228 9.228 0 0 0 1.1-1.332A8.952 8.952 0 0 0 21 13a9.09 9.09 0 0 0-.183-1.814z"}}]})(t)}function f(t){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 21c3.527-1.547 5.999-4.909 5.999-9S19.527 4.547 16 3v2c2.387 1.386 3.999 4.047 3.999 7S18.387 17.614 16 19v2z"}},{tag:"path",attr:{d:"M16 7v10c1.225-1.1 2-3.229 2-5s-.775-3.9-2-5zM4 17h2.697l5.748 3.832a1.004 1.004 0 0 0 1.027.05A1 1 0 0 0 14 20V4a1 1 0 0 0-1.554-.832L6.697 7H4c-1.103 0-2 .897-2 2v6c0 1.103.897 2 2 2zm0-8h3c.033 0 .061-.016.093-.019a1.027 1.027 0 0 0 .38-.116c.026-.015.057-.017.082-.033L12 5.868v12.264l-4.445-2.964c-.025-.017-.056-.02-.082-.033a.986.986 0 0 0-.382-.116C7.059 15.016 7.032 15 7 15H4V9z"}}]})(t)}const C=(t,e)=>({type:t,payload:e}),T=t=>C("SET_IS_READING",t),k=t=>C("SET_IS_MINIMIZED",t),w=t=>C("SET_IS_VISIBLE",t),E=t=>C("SET_IS_LOADING",t),O=t=>C("SET_ELAPSED_TIME",t),S=t=>C("SET_CURRENT_WORD_INDEX",t),I=t=>C("SET_DURATION",t),R=t=>C("CHANGE_SETTINGS",t),W=t=>C("CHANGE_OPTIONS",t),M=t.createContext(null),P=t.createContext(null),j=t.createContext(null);function z(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n}function A(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function a(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((r=r.apply(t,e||[])).next())}))}class N{constructor(){this.HTMLTags=["div","span","a","i","img","html","body","section","article","main","head","header","aside","nav"]}static isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||(!!/iPad|iPhone|iPod/.test(navigator.platform)||(window.innerWidth<768||window.devicePixelRatio>1))}static isSlashTextContent(t){return!!t&&/<.+>\/<\/.+>/.test(t)}static isDigitTextContent(t){return!!t&&/<.+>\d+<\/.+>/.test(t)}static isWordTextContent(t){return!!t&&/<.+>[a-zA-Z]+<\/.+>/.test(t)}static isWord(t){return!!t&&/^[a-zA-Z]/.test(t)}static isWordWithNumbers(t){return!!t&&/^[a-zA-Z0-9]+$/.test(t)}static isNumber(t){return!!t&&(!isNaN(+t)&&isFinite(+t)||parseFloat(t))}static isURL(t){return!!t&&/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&/=]*)$/.test(t)}static isSpace(t){return" "===t}static isEmptyString(t){return""===t}static isWhitespaceChar(t){return/^[\n\r\t]+$/.test(t)}static isAt(t){return"@"===t}static isDot(t){return"."===t}static isZero(t){return"0"===t}static isPunctuation(t){return!!t&&/^[.,;:!?]+$/.test(t)}static isPunctuationButDot(t){return!!t&&/^[,;:!?]+$/.test(t)}static isHashtag(t){return"#"===t}static isSlash(t){return"/"===t}static isParens(t){return!!t&&/^[()[\]{}]+$/.test(t)}static isTag(t){return!!t&&/<.+?>/.test(t)}static isCodeOpenTag(t){return!!t&&/<code(@@)?\s?([a-zA-Z-]+="[a-zA-Z-_@\s]+")?>/.test(t)}static isCodeCloseTag(t){return!!t&&/<\/code>/.test(t)}static isWordInsideAngularBrackets(t){return!!t&&/^<+.*>+\.?$/.test(t)}static isSpecialReadableCharacter(t){return!!t&&/^[@#\\/_*^°£$%&=+]+$/.test(t)}static isSpecialUnreadableCharacter(t){return!!t&&/^[()[\]{}'"<>`|-]+$/.test(t)}static isSpecialCharacter(t){return!!t&&/^([.,;:\-_`'"*+()[\]{}<>\s\n])$/.test(t)}static isHTMLEntity(t){return!!t&&/&[a-z]+?;+/.test(t)}static isValidDate(t){return new Date(t)>0}static isFunction(t){return t&&"function"==typeof t}}N.__join__=function(t){let e="",n=0;for(const r of this){const s=t(r,n,this);e=e+r.toString()+s,n++}return e};class L extends l{constructor(t,{language:e="en",color1:n="#DEE",color2:r="#9DE",onEnd:s=(()=>null),onStart:i=(()=>null),onPause:o=(()=>null),onResume:a=(()=>null),onReset:l=(()=>null),onBoundary:c=(()=>null),onTimeTick:h=(()=>null),onWordClick:u=(()=>null),onSeek:d=(()=>null),onSettingsChange:p=(()=>null),onOptionsChange:m=(()=>null)}={language:"en",color1:"#DEE",color2:"#9DE",onPlay:()=>null,onEnd:()=>null,onStart:()=>null,onPause:()=>null,onResume:()=>null,onReset:()=>null,onBoundary:()=>null,onTimeTick:()=>null,onWordClick:()=>null,onSeek:()=>null,onSettingsChange:()=>null,onOptionsChange:()=>null}){super(),this.textContainer=t,this.style={color1:n,color2:r},this.synth=window.speechSynthesis,this.utterance=new window.SpeechSynthesisUtterance,this.timeoutRef=void 0,this.seekTimeoutRef=void 0,this.editTimeoutRef=void 0,this.events=[{type:"boundary",handlers:[c]},{type:"time-tick",handlers:[h]},{type:"word-click",handlers:[u]},{type:"start",handlers:[i]},{type:"pause",handlers:[o]},{type:"resume",handlers:[a]},{type:"reset",handlers:[l]},{type:"seek",handlers:[d]},{type:"end",handlers:[s]},{type:"settings-change",handlers:[p]},{type:"options-change",handlers:[m]}];this.settings=new Proxy({pitch:1,voiceURI:"",language:e,rate:1,volume:.5},{set:(t,e,n)=>(this.emit("settings-change",this),Reflect.set(t,e,n))});this.options=new Proxy({isHighlightTextOn:!0,isChunksModeOn:N.isMobile(),isPreserveHighlighting:!0},{set:(t,e,n)=>(this.emit("options-change",this),Reflect.set(t,e,n))});this.state=new Proxy({isMobile:N.isMobile(),voice:{},voices:[],isLoading:!0,tagIndex:0,currentWord:"",currentWordIndex:0,currentWordProps:{charIndex:0,charLength:0},highlightedWords:[],lastWordPosition:0,numberOfWords:0,wholeText:"",wholeTextArray:[],textRemaining:"",duration:0,elapsedTime:0,currentChunkIndex:0,chunksArray:[],isPaused:!1,isReading:!1},{set:(t,e,n)=>(console.log("State trap",e,n),"currentWordIndex"===e&&this.emit("seek",this),this.emit("state-change"),Reflect.set(t,e,n))})}init(){return A(this,void 0,void 0,(function*(){Array.prototype.__join__=N.__join__;try{return this.state.voices=yield this.getVoices(),this.state.voice=this.state.voices[0],this.settings.voiceURI=this.state.voice.voiceURI,this.addHTMLHighlightTags(this.textContainer),this.applyBasicStyleToWords(this.textContainer,"[data-id]"),this.state.numberOfWords=this.retrieveNumberOfWords(this.textContainer,"[data-id]"),this.state.wholeText=this.retrieveWholeText(this.textContainer,"[data-id]"),this.state.textRemaining=this.state.wholeText,this.state.duration=this.getTextDuration(this.state.wholeText,this.settings.rate),this.state.wholeTextArray=this.retrieveWholeTextArray(this.textContainer,"[data-id]"),this.state.chunksArray=this.retrieveChunks(),this.attachEventListenersToWords(this.textContainer,"[data-id]",{type:"click",fn:t=>{this.emit("word-click",this,t)}}),this.addCustomEventListeners(),this.initUtterance(),this}catch(t){return console.log("Init error",t),this}}))}initUtterance(){this.utterance.text=this.options.isChunksModeOn?this.state.chunksArray[this.state.currentChunkIndex].text:this.state.wholeText,this.utterance.lang=this.settings.language,this.utterance.voice=this.state.voice,this.utterance.pitch=this.settings.pitch,this.utterance.rate=this.settings.rate,this.utterance.volume=this.settings.volume,this.utterance.onboundary=this.handleBoundary.bind(this),this.utterance.onend=t=>{if(!1!==this.state.isReading||!1!==this.state.isPaused){if(!this.options.isChunksModeOn&&this.state.currentWordIndex>=this.state.wholeTextArray.length-1||this.options.isChunksModeOn&&this.state.currentChunkIndex>=this.state.chunksArray.length-1)return this.emit("end",this);this.options.isPreserveHighlighting||this.resetHighlight(),this.options.isChunksModeOn&&this.state.isReading&&this.handleChunkHighlighting(),this.play("next-chunk-start")}}}addHTMLHighlightTags(t){[...t.childNodes].forEach((e=>{if((1!==e.nodeType||"PRE"!==e.tagName&&"CODE"!==e.tagName)&&(1===e.nodeType&&this.addHTMLHighlightTags(e),3===e.nodeType)){if(N.isEmptyString(e.textContent)||N.isSpace(e.textContent)||N.isWhitespaceChar(e.textContent))return;const n=document.createElement("span");e.data.split("").filter(((t,e,n)=>!!t&&((!N.isSpace(t)||!N.isPunctuation(n[e+1]))&&(!N.isSpace(t)||!N.isSpace(n[e+1]))))).map(((t,e,n)=>N.isWhitespaceChar(t)?" ":N.isSpecialReadableCharacter(t)?` ${t} `:N.isDot(t)&&N.isNumber(n[e-1])&&N.isNumber(n[e+1])?`${t}`:N.isDot(t)&&N.isWordWithNumbers(n[e-1])&&N.isWordWithNumbers(n[e+1])?` ${t} `:N.isPunctuationButDot(t)&&N.isWord(n[e-1])&&N.isWord(n[e+1])?`${t} `:t)).join("").split(" ").forEach(((t,e,r)=>{if(t)if(N.isSpecialUnreadableCharacter(t)||N.isWordInsideAngularBrackets(t)){const e=document.createTextNode(t+" ");n.appendChild(e)}else{const s=document.createElement("span");s.setAttribute("data-id",(this.state.tagIndex++).toString()),s.setAttribute("data-type","WORD"),N.isSpecialReadableCharacter(t)||N.isSpecialReadableCharacter(r[e+1])||N.isDot(t)||N.isDot(r[e+1])||N.isZero(t)?s.textContent=t:s.textContent=t+" ",n.appendChild(s)}})),t.replaceChild(n,e)}}))}highlightChunk(t){const e=this.state.currentWordIndex+this.state.chunksArray[t].length;for(let t=this.state.currentWordIndex;t<e;t++)this.highlightText(t)}retrieveChunks(){let t=".";const e=[];let n=0;return this.state.wholeTextArray.join(" ").split(/(?<![\s])[.?!;]+(?=[\s\n])/).forEach(((r,s)=>{if(N.isPunctuation(r))t=r;else{const i=r.trim().split(/[\s]/).filter((t=>t)).length,o=r.split(/\s+/).__join__(((t,e,n)=>N.isPunctuation(n[e+1])||N.isDot(t)?"":" ")),a={text:o+t,length:i,start:n,end:n+i-1,idx:s};n+=i,e.push(a)}})),e}handleChunkHighlighting(){const t=this.state.chunksArray[this.state.currentChunkIndex],e=this.state.chunksArray[++this.state.currentChunkIndex];this.utterance.text=e.text,this.state.currentWordIndex+=t.length,this.highlightChunk(this.state.currentChunkIndex)}scrollTo(t){const e=this.textContainer.querySelector(`[data-id="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}timeCount(t,e){if(e%10!=0)throw new Error("Frequency must be a multiple of 10");this.state.elapsedTime+=e,this.state.elapsedTime%1e3==0&&this.emit("time-tick",this,this.state.elapsedTime),this.timeoutRef=setTimeout(this.timeCount.bind(this,t,e),e)}pauseTimeCount(){clearTimeout(this.timeoutRef)}resetTimeCount(){this.state.elapsedTime=0,clearTimeout(this.timeoutRef)}handleBoundary(t){if(this.options.isChunksModeOn)return;this.state.currentWord=this.state.wholeTextArray[this.state.currentWordIndex];const e=this.state.wholeTextArray[this.state.currentWordIndex-1];"word"===t.name&&0!==t.charLength&&((N.isNumber(e)||N.isValidDate(e))&&t.charIndex===this.state.currentWordProps.charIndex&&t.charLength===this.state.currentWordProps.charLength||(this.state.currentWordProps={charIndex:t.charIndex,charLength:t.charLength},this.highlightText(this.state.currentWordIndex),this.state.currentWordIndex+=1,/[.?!;]+/.test(this.state.wholeTextArray[this.state.currentWordIndex])&&this.state.currentChunkIndex++,this.emit("boundary",this,t)))}getVoices(){return new Promise(((t,e)=>{let n=null;try{n=setInterval((()=>{0!==this.synth.getVoices().length&&(t(this.synth.getVoices().filter((t=>t.lang.startsWith(this.settings.language)))),clearInterval(n))}),10)}catch(t){e(t),clearInterval(n)}}))}highlightText(t){if(!this.options.isHighlightTextOn)return;const e=this.textContainer.querySelector(`[data-id="${t}"]`);if(!e)return;this.state.highlightedWords.push(e);const n=e.getBoundingClientRect().x;n<=this.state.lastWordPosition&&this.scrollTo(this.state.currentWordIndex),this.options.isPreserveHighlighting||this.options.isChunksModeOn||(this.resetHighlight(),this.state.highlightedWords=[e]),this.state.lastWordPosition=n,e.style.backgroundColor=this.style.color1,e.style.boxShadow=`10px 0px 0px 0px ${this.style.color1}`,e.style.textDecoration="underline"}changeChunkMode(t){clearTimeout(this.timeoutRef),this.options.isChunksModeOn=t,this.state.currentWordIndex=this.state.chunksArray[this.state.currentChunkIndex].start,this.options.isChunksModeOn?this.highlightChunk(this.state.currentChunkIndex):this.resetHighlight(),this.utterance.text=this.options.isChunksModeOn?this.getCurrentChunkText(this.state.currentChunkIndex):this.getRemainingText(this.state.currentWordIndex),this.restart("chunks-mode-change",500)}resetHighlight(){this.state.highlightedWords.forEach((t=>{t.style.backgroundColor="",t.style.boxShadow="",t.style.textDecoration="none",this.state.highlightedWords=[]}))}addCustomEventListeners(){this.events.forEach((t=>{if(t.handlers.length>0)for(const e of t.handlers)N.isFunction(e)&&this.on(t.type,e.bind(this))}))}attachEventListenersToWords(t,e,{type:n,fn:r}){[...t.querySelectorAll(e)].forEach((t=>{t.addEventListener(n,r)}))}getRemainingText(t){const e=this.state.wholeTextArray.length;return this.state.wholeTextArray.slice(t,e+1).__join__(((t,e,n)=>N.isDot(n[e+1])||N.isDot(t)?"":" "))}getCurrentChunkText(t){return this.state.chunksArray[t].text}retrieveNumberOfWords(t,e){return[...t.querySelectorAll(e)].length}retrieveWholeText(t,e){return[...t.querySelectorAll(e)].map((t=>t.textContent)).__join__(((t,e,n)=>N.isPunctuation(n[e+1])||N.isDot(t)?"":" "))}retrieveWholeTextArray(t,e){return[...t.querySelectorAll(e)].map((t=>t.textContent))}applyBasicStyleToWords(t,e){[...t.querySelectorAll(e)].filter((t=>t&&!N.isPunctuation(t.textContent))).forEach((t=>{t&&(t.style.transition="all 0.4s")}))}getTextDuration(t,e){return 100*t.length*1/e}getAverageTextElapsedTime(t,e){const n=t.slice(0,e).join(" ");return t=>this.getTextDuration(n,t)}delayRestart(t,e){return setTimeout((()=>{this.synth.cancel(),this.isReading()&&this.play(t),this.isPaused()&&(this.play(t).then((()=>this.pause())),this.pause())}),500)}restart(t,e){this.synth.cancel(),this.isReading()&&this.play(t),this.isPaused()&&(this.play(t).then((()=>this.pause())),this.pause())}changeSettings(t){if(clearTimeout(this.timeoutRef),clearTimeout(this.editTimeoutRef),t.voiceURI){const e=this.state.voices.filter((e=>e.voiceURI===t.voiceURI)).length>0?this.state.voices.filter((e=>e.voiceURI===t.voiceURI))[0]:this.state.voices[0];this.state.voice=e,this.utterance.voice=e}t.rate&&(this.state.duration=this.getTextDuration(this.state.wholeText,t.rate),this.state.elapsedTime=this.getAverageTextElapsedTime(this.state.wholeTextArray,this.state.currentWordIndex)(this.settings.rate),this.emit("time-tick",this,this.state.elapsedTime)),this.utterance=Object.assign(this.utterance,Object.assign(Object.assign({},t),{text:this.options.isChunksModeOn?this.getCurrentChunkText(this.state.currentChunkIndex):this.getRemainingText(this.state.currentWordIndex)}));for(const e of Object.entries(t))this.settings[e[0]]=e[1];this.editTimeoutRef=this.delayRestart("edit-utterance",500)}changeOptions(t){"isChunksModeOn"in t&&this.changeChunkMode(t.isChunksModeOn);for(const e of Object.entries(t))this.options[e[0]]=e[1]}seekTo(t){clearTimeout(this.timeoutRef),clearTimeout(this.seekTimeoutRef);const e=this.state.chunksArray.find((e=>t>=e.start&&t<=e.end));this.state.currentChunkIndex=e.idx,this.state.currentWordIndex=e.start,this.options.isChunksModeOn?(this.utterance.text=e.text,this.resetHighlight(),this.highlightChunk(this.state.currentChunkIndex)):(this.state.textRemaining=this.getRemainingText(t),this.state.currentWordIndex=t,this.utterance.text=this.state.textRemaining,this.resetHighlight(),this.highlightText(this.state.currentWordIndex)),this.state.elapsedTime=this.getAverageTextElapsedTime(this.state.wholeTextArray,this.state.currentWordIndex)(this.settings.rate),this.emit("time-tick",this,this.state.elapsedTime),this.seekTimeoutRef=this.delayRestart("seek",500)}play(t){switch(this.synth.cancel(),clearTimeout(this.timeoutRef),this.synth.speak(this.utterance),this.state.isPaused=!1,this.state.isReading=!0,this.timeCount(null,20),t){case"start":return this.emit("start",this),new Promise((t=>{this.utterance.onstart=e=>{this.options.isChunksModeOn&&this.highlightChunk(0),t(null)}}));case"resume-chunk-mode":return this.emit("resume-chunk-mode",this),new Promise((t=>{this.utterance.onstart=e=>{t(null)}}));case"next-chunk-start":return this.emit("next-chunk-start",this,this.state.chunksArray[this.state.currentChunkIndex]),new Promise((t=>{this.utterance.onstart=e=>{t(null)}}));default:return new Promise((t=>{this.utterance.onstart=e=>{t(null)}}))}}pause(){this.synth.pause(),this.state.isPaused=!0,this.state.isReading=!1,this.emit("pause",this),this.pauseTimeCount()}resume(){this.options.isChunksModeOn?this.play("resume-chunk-mode"):this.synth.resume(),this.state.isPaused=!1,this.state.isReading=!0,this.emit("resume",this),this.timeCount(null,20)}reset(){this.synth.cancel(),this.resetHighlight(),this.resetTimeCount(),this.state=Object.assign(Object.assign({},this.state),{textRemaining:this.state.wholeText,currentWordIndex:0,currentChunkIndex:0,highlightedWords:[],lastWordPosition:0,isPaused:!1,isReading:!1}),this.initUtterance(),this.scrollTo(1),this.emit("reset",this)}isReading(){return this.state.isReading}isPaused(){return this.state.isPaused}}const D={settings:{rate:1,voiceURI:"",volume:.5,pitch:0,language:"en"},options:{isPreserveHighlighting:!0,isHighlightTextOn:!0,isChunksModeOn:!1},isReading:!1,isLoading:!1,voices:[],elapsedTime:0,isMinimized:!0,isVisible:!0,isSettingsVisible:!1,numberOfWords:0,currentWordIndex:1,duration:0},H=(t,e)=>{const{type:n,payload:r}=e;switch(n){case"SET_IS_READING":return Object.assign(Object.assign({},t),{isReading:r});case"SET_IS_LOADING":return Object.assign(Object.assign({},t),{isLoading:r});case"SET_IS_MINIMIZED":return Object.assign(Object.assign({},t),{isMinimized:r});case"SET_IS_VISIBLE":return Object.assign(Object.assign({},t),{isVisible:r});case"SET_IS_SETTINGS_VISIBLE":return Object.assign(Object.assign({},t),{isSettingsVisible:r});case"SET_VOICES":return Object.assign(Object.assign({},t),{voices:r});case"SET_ELAPSED_TIME":return Object.assign(Object.assign({},t),{elapsedTime:r});case"SET_DURATION":return Object.assign(Object.assign({},t),{duration:r});case"SET_NUMBER_OF_WORDS":return Object.assign(Object.assign({},t),{numberOfWords:r});case"SET_CURRENT_WORD_INDEX":return Object.assign(Object.assign({},t),{currentWordIndex:r});case"CHANGE_SETTINGS":return Object.assign(Object.assign({},t),{settings:Object.assign(Object.assign({},t.settings),r)});case"CHANGE_OPTIONS":return Object.assign(Object.assign({},t),{options:Object.assign(Object.assign({},t.options),r)});default:return Object.assign({},t)}},$=()=>e(M),V=()=>e(j),B=()=>e(P),U=({value:e,children:n})=>t.createElement(P.Provider,{value:e},n),F=({children:e})=>{const{dispatch:r}=$(),{textContainer:s,options:i,styleOptions:o}=B(),a=n(new L(s,Object.assign(Object.assign({},i),{color1:(null==o?void 0:o.highlightColor1)||"#DEE",color2:o.highlightColor2||"#9DE",onStart:t=>{console.log("Start"),r(T(t.state.isReading))},onPause:t=>{console.log("Pause"),r(T(t.state.isReading))},onResume:t=>{console.log("Resume"),r(T(t.state.isReading))},onReset:t=>{console.log("Reset Event called",t.state.elapsedTime),r(T(t.state.isReading)),r(O(t.state.elapsedTime)),r(S(t.state.currentWordIndex))},onEnd:t=>{console.log("End"),t.reset()},onBoundary:(t,e)=>{console.log("Boundary event")},onSeek:t=>{r(S(t.state.currentWordIndex))},onTimeTick:t=>{r(O(t.state.elapsedTime))},onWordClick:(t,e)=>{const n=+e.target.dataset.id;null==t||t.seekTo(n)},onSettingsChange:t=>{console.log("Settings change"),r(R(t.settings))},onOptionsChange:(t,e)=>{console.log("Options change",e),r(W(t.options))}})));return t.createElement(j.Provider,{value:{reader:a.current}},e)},G=({children:e})=>{const[n,s]=r(H,D);return t.createElement(M.Provider,{value:{state:n,dispatch:s}},e)};function Z(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}var q="styles-module_container__2RHmB",Y="styles-module_minimized__qd4bl",J="styles-module_notMinimized__vhRsj",Q="styles-module_button__l6T6c",K="styles-module_loading__-h2hU",X="styles-module_notLoading__GJ8Ir",tt="styles-module_reset__hvUvm";Z(".styles-module_container__2RHmB {\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tposition: relative;\r\n\tz-index: 1;\r\n\tmargin: 5px 0px 5px 0px;\r\n}\r\n\r\n.styles-module_minimized__qd4bl {\r\n\tborder-bottom: 1px;\r\n\tpadding: 2px 0px 2px 0px;\r\n}\r\n\r\n.styles-module_notMinimized__vhRsj {\r\n\tpadding-top: 2px;\r\n}\r\n\r\n.styles-module_button__l6T6c {\r\n\tborder-radius: 50%;\r\n\tmargin: 2px;\r\n\tbackground-color: var(--bgColor);\r\n\tcolor: var(--primaryColor);\r\n\tfont-weight: normal !important;\r\n\tcursor: pointer;\r\n\tborder: 4px solid var(--secondaryColor);\r\n\ttransition: all 0.2s;\r\n\tfont-size: 1.5em;\r\n}\r\n\r\n.styles-module_button__l6T6c:hover {\r\n\tborder: 3px solid var(--primaryColor);\r\n\tcolor: var(--secondaryColor);\r\n}\r\n\r\n.styles-module_loading__-h2hU {\r\n\tpointer-events: none;\r\n}\r\n\r\n.styles-module_notLoading__GJ8Ir {\r\n\tpointer-events: all;\r\n}\r\n\r\n.styles-module_reset__hvUvm {\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\tright: 0px;\r\n\tfont-weight: bold;\r\n\tcursor: pointer;\r\n\ttransition: 0.2s ease-in;\r\n\tfont-size: 0.9em;\r\n\tcolor: var(--primaryColor);\r\n}\r\n\r\n.styles-module_reset__hvUvm:hover {\r\n\tcolor: var(--secondaryColor);\r\n}\r\n");const et=()=>{const{reader:e}=V(),{state:n,dispatch:r}=$(),{isReading:s,isLoading:i,isMinimized:o}=n;return t.createElement("div",{className:`${q} ${o?Y:J}`},t.createElement(x,{className:`${Q} ${i?K:X}`,title:"Fast backward",onDoubleClick:t=>t.preventDefault(),onPointerDown:()=>{e&&((null==e?void 0:e.options.isChunksModeOn)?e.state.currentChunkIndex-1>=0&&e.seekTo(e.state.chunksArray[e.state.currentChunkIndex-1].start):e.state.currentWordIndex-1>=0&&e.seekTo(e.state.currentWordIndex-1))}}),s?t.createElement(v,{style:{fontSize:"2em"},className:`${Q} ${i?K:X}`,title:"Pause",onPointerDown:()=>{null==e||e.pause()}}):t.createElement(_,{style:{fontSize:"2em"},className:`${Q} ${i?K:X}`,title:"Play",onPointerDown:()=>{(null==e?void 0:e.isPaused())?null==e||e.resume():null==e||e.play("start").then((()=>{r(E(!1))}))}}),t.createElement(y,{title:"Fast forward",className:`${Q} ${i?K:X}`,onPointerDown:()=>{e&&((null==e?void 0:e.options.isChunksModeOn)?e.state.currentChunkIndex+1<e.state.chunksArray.length&&e.seekTo(e.state.chunksArray[e.state.currentChunkIndex+1].start):e.state.currentWordIndex+1<=e.state.wholeTextArray.length&&e.seekTo(e.state.currentWordIndex+1))}}),t.createElement(b,{className:tt,title:"reset",onClick:()=>{null==e||e.reset()}}))};function nt(t){return m({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}}]})(t)}function rt(t){return m({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}}]})(t)}function st(t){return m({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"}}]})(t)}var it="styles-module_button__9sOag";Z(".styles-module_button__9sOag {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tz-index: 100;\r\n\tfont-size: 1em !important;\r\n\twidth: 20px;\r\n\theight: 20px;\r\n\tborder-radius: 3px;\r\n\tborder: 2px solid var(--primaryColor);\r\n\tbackground-color: var(--bgColor);\r\n\tcolor: var(--textColor);\r\n\tfont-weight: bold !important;\r\n\tcursor: pointer;\r\n\ttransition: all 0.2s linear;\r\n}\r\n\r\n.styles-module_button__9sOag:hover {\r\n\tbackground-color: var(--bgColor);\r\n\tcolor: var(--secondaryColor);\r\n}\r\n");const ot=()=>{const{reader:e}=V(),{state:n,dispatch:r}=$(),{isMinimized:s}=n;return t.createElement(t.Fragment,null,t.createElement("div",{style:{position:"absolute",top:"2px",right:"3px"},title:"Close",className:it,onPointerDown:()=>{r(w(!1)),null==e||e.reset()}},t.createElement(nt,{title:"Close"})),t.createElement("div",{style:{position:"absolute",top:"2px",right:"24px"},title:s?"Maximize":"Minimize",className:it,onPointerDown:s?()=>{r(k(!1))}:()=>{r(k(!0))}},s?t.createElement(rt,null):t.createElement(st,null)))};function at(t,e){e=e||2;let n=t.toString(),r=0;return r=e-n.length+1,n=new Array(r).join("0").concat(n),n}var lt=function(t,e){const n=e&&e.leading,r=t<=-1e3?"-":"",s=function(t){if("number"!=typeof t)throw new TypeError("Expected a number");return{days:Math.trunc(t/864e5),hours:Math.trunc(t/36e5)%24,minutes:Math.trunc(t/6e4)%60,seconds:Math.trunc(t/1e3)%60,milliseconds:Math.trunc(t)%1e3}}(t<0?-t:t),i=at(s.seconds);return s.days?r+s.days+":"+at(s.hours)+":"+at(s.minutes)+":"+i:s.hours?r+(n?at(s.hours):s.hours)+":"+at(s.minutes)+":"+i:r+(n?at(s.minutes):s.minutes)+":"+i},ct=/^\s+|\s+$/g,ht=/^[-+]0x[0-9a-f]+$/i,ut=/^0b[01]+$/i,dt=/^0o[0-7]+$/i,pt=parseInt,mt="object"==typeof global&&global&&global.Object===Object&&global,gt="object"==typeof self&&self&&self.Object===Object&&self,xt=mt||gt||Function("return this")(),yt=Object.prototype.toString,vt=Math.max,_t=Math.min,bt=function(){return xt.Date.now()};function ft(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ct(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==yt.call(t)}(t))return NaN;if(ft(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ft(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ct,"");var n=ut.test(t);return n||dt.test(t)?pt(t.slice(2),n?2:8):ht.test(t)?NaN:+t}var Tt=function(t,e,n){var r,s,i,o,a,l,c=0,h=!1,u=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,i=s;return r=s=void 0,c=e,o=t.apply(i,n)}function m(t){return c=t,a=setTimeout(x,e),h?p(t):o}function g(t){var n=t-l;return void 0===l||n>=e||n<0||u&&t-c>=i}function x(){var t=bt();if(g(t))return y(t);a=setTimeout(x,function(t){var n=e-(t-l);return u?_t(n,i-(t-c)):n}(t))}function y(t){return a=void 0,d&&r?p(t):(r=s=void 0,o)}function v(){var t=bt(),n=g(t);if(r=arguments,s=this,l=t,n){if(void 0===a)return m(l);if(u)return a=setTimeout(x,e),p(l)}return void 0===a&&(a=setTimeout(x,e)),o}return e=Ct(e)||0,ft(n)&&(h=!!n.leading,i=(u="maxWait"in n)?vt(Ct(n.maxWait)||0,e):i,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=s=a=void 0},v.flush=function(){return void 0===a?o:y(bt())},v},kt="styles-module_container__0pmKL",wt="styles-module_minimized__YNN-c",Et="styles-module_seekbar__vpQeo",Ot="styles-module_time__HfKnv";Z(".styles-module_container__0pmKL {\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n\tposition: relative;\r\n\tz-index: 2;\r\n\tmargin: 10px 0px 0px 0px;\r\n}\r\n\r\n.styles-module_minimized__YNN-c {\r\n\twidth: 90%;\r\n\tmargin: 10px 0px 10px 0px;\r\n}\r\n\r\n.styles-module_seekbar__vpQeo {\r\n\twidth: 100%;\r\n\tappearance: none;\r\n\theight: 2px;\r\n\tbackground: var(--primaryColor);\r\n\toutline: none;\r\n\topacity: 0.7;\r\n\ttransition: opacity 0.2s;\r\n}\r\n\r\n.styles-module_seekbar__vpQeo::-webkit-slider-thumb {\r\n\tappearance: none;\r\n\twidth: 14px; /* Set a specific slider handle width */\r\n\theight: 14px; /* Slider handle height */\r\n\tbackground: var(--bgColor);\r\n\tcursor: grab; /* Cursor on hover */\r\n\tborder: 2px solid var(--primaryColor);\r\n\tborder-radius: 50%;\r\n\tz-index: 1;\r\n\tbox-shadow: 0 2px 5px var(--secondaryColor);\r\n\ttransition: transform 0.1s ease-out;\r\n}\r\n.styles-module_seekbar__vpQeo::-moz-range-thumb {\r\n\tappearance: none;\r\n\twidth: 12px; /* Set a specific slider handle width */\r\n\theight: 12px; /* Slider handle height */\r\n\tbackground: var(--bgColor);\r\n\tcursor: pointer; /* Cursor on hover */\r\n\tborder: 2px solid var(--primaryColor);\r\n\tborder-radius: 50%;\r\n\tz-index: 1;\r\n\tbox-shadow: 0 2px 5px var(--secondaryColor);\r\n\ttransition: transform 0.4s ease-out;\r\n}\r\n\r\n.styles-module_seekbar__vpQeo::-webkit-slider-thumb:hover {\r\n\ttransform: scale(1.1);\r\n\tbox-shadow: 0 2px 10px var(--bgColor);\r\n}\r\n\r\n.styles-module_seekbar__vpQeo::-webkit-slider-thumb:active {\r\n\tcursor: grabbing;\r\n}\r\n\r\n.styles-module_time__HfKnv {\r\n\twidth: 50px;\r\n\tfont-size: 0.7em !important;\r\n\tfont-weight: normal !important;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tposition: absolute;\r\n\ttop: 19px;\r\n\tleft: -15px;\r\n\tz-index: 100 !important;\r\n\tcolor: #111;\r\n\tmargin: 0 !important;\r\n}\r\n");const St=()=>{const{reader:e}=V(),{state:n}=$(),{elapsedTime:r,numberOfWords:s,currentWordIndex:i,isMinimized:o,duration:a}=n,l=Tt((t=>{null==e||e.seekTo(t)}),5);return t.createElement("div",{className:`${kt} ${o&&wt}`},t.createElement("h5",{className:Ot},lt(r)),t.createElement("input",{className:Et,type:"range",min:"0",max:s,step:"1",value:i,onChange:t=>{l(+t.target.value)}}),t.createElement("h5",{style:{left:"auto",right:"-15px"},className:Ot},lt(a),"*"))};var It="styles-module_container__dB4nt",Rt="styles-module_button__oFwwA",Wt="styles-module_optionsContainer__miH3Q",Mt="styles-module_visible__eJpaP";Z(".styles-module_container__dB4nt {\r\n\tmargin-right: 10px;\r\n}\r\n\r\n.styles-module_button__oFwwA {\r\n\tposition: relative;\r\n\tfont-size: 0.7em;\r\n\tfont-weight: bold;\r\n\tcolor: var(--primaryColor);\r\n\tcursor: pointer;\r\n\ttransition: all 0.5s linear;\r\n\tborder: none;\r\n\tbackground: none;\r\n\tpadding: 1px 6px !important;\r\n}\r\n\r\n.styles-module_button__oFwwA:hover {\r\n\tcolor: var(--secondaryColor);\r\n}\r\n.styles-module_button__oFwwA::after {\r\n\tcontent: '';\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\tbottom: -2px;\r\n\twidth: 0px;\r\n\theight: 1.2px;\r\n\tbackground-color: var(--primaryColor);\r\n\ttransition: all 0.2s ease-in;\r\n}\r\n.styles-module_button__oFwwA:hover::after {\r\n\twidth: 100%;\r\n}\r\n\r\n.styles-module_optionsContainer__miH3Q {\r\n\tposition: absolute;\r\n\topacity: 0;\r\n\tpointer-events: none;\r\n\twidth: 100%;\r\n\theight: 46px;\r\n\tbottom: 0px;\r\n\tright: 0;\r\n\tbackground-color: var(--bgColor);\r\n\tcolor: var(--primaryColor);\r\n\tz-index: 100;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\toverflow-x: hidden;\r\n}\r\n\r\n.styles-module_visible__eJpaP {\r\n\topacity: 1;\r\n\tpointer-events: all;\r\n}\r\n");const Pt=e=>{var{children:n}=e,r=z(e,["children"]);return t.createElement("div",Object.assign({className:Rt},r),n)},jt=e=>{var r,{options:a,value:l,title:c,onChange:h,style:u}=e,d=z(e,["options","value","title","onChange","style"]);const[p,m]=i(!1),g=n(null),x=o((()=>{m(!1)}),[]);return((t,e)=>{s((()=>{const n=n=>{t.current&&!t.current.contains(null==n?void 0:n.target)&&e(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[t,e])})(g,x),t.createElement("div",Object.assign({className:It},d),t.createElement(Pt,{type:"button",onClick:()=>{m(!0)}},null===(r=a.find((t=>t.value===l)))||void 0===r?void 0:r.name),t.createElement("div",{ref:g,className:`${Wt} ${p&&Mt}`},a.map((e=>t.createElement(Pt,{key:e.value,onClick:()=>{var t;t=e.value,h(t),x()}},e.name)))))};var zt="styles-module_container__b86L6",At="styles-module_slider__Y4O-v",Nt="styles-module_icon__1apXm";Z(".styles-module_container__b86L6 {\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\twidth: 70px;\r\n}\r\n\r\n.styles-module_container__b86L6 input {\r\n\twidth: 100%;\r\n}\r\n\r\n.styles-module_container__b86L6 label {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tfont-size: 0.7rem;\r\n\tright: 0%;\r\n}\r\n\r\n.styles-module_container__b86L6 label.styles-module_value__ildtp {\r\n\ttop: -1rem;\r\n\tcolor: var(--color-extra1);\r\n}\r\n\r\n.styles-module_slider__Y4O-v {\r\n\twidth: 100%;\r\n\tappearance: none;\r\n\theight: 2px;\r\n\tbackground: var(--primaryColor);\r\n\toutline: none;\r\n\topacity: 0.7;\r\n\ttransition: opacity 0.2s;\r\n}\r\n\r\n.styles-module_slider__Y4O-v:hover {\r\n\topacity: 1;\r\n}\r\n\r\n.styles-module_slider__Y4O-v::-webkit-slider-thumb {\r\n\tappearance: none;\r\n\twidth: 10px; /* Set a specific slider handle width */\r\n\theight: 10px; /* Slider handle height */\r\n\tbackground: var(--bgColor);\r\n\tcursor: pointer; /* Cursor on hover */\r\n\tborder: 2px solid var(--primaryColor);\r\n\tborder-radius: 50%;\r\n\tz-index: 1;\r\n\tbox-shadow: 0 2px 5px var(--secondaryColor);\r\n\ttransition: transform 0.1s ease-out;\r\n}\r\n.styles-module_slider__Y4O-v::-moz-range-thumb {\r\n\tappearance: none;\r\n\twidth: 10px; /* Set a specific slider handle width */\r\n\theight: 10px; /* Slider handle height */\r\n\tbackground: var(--bgColor);\r\n\tcursor: pointer; /* Cursor on hover */\r\n\tborder: 2px solid var(--primaryColor);\r\n\tborder-radius: 50%;\r\n\tz-index: 1;\r\n\tbox-shadow: 0 2px 5px var(--secondaryColor);\r\n\ttransition: transform 0.4s ease-out;\r\n}\r\n\r\n.styles-module_slider__Y4O-v::-webkit-slider-thumb:hover {\r\n\ttransform: scale(1.1);\r\n\tbox-shadow: 0 2px 10px var(--bgColor);\r\n}\r\n\r\n::-moz-range-thumb:hover {\r\n\ttransform: scale(1.1);\r\n\tbox-shadow: 0 2px 10px var(--bgColor);\r\n}\r\n\r\n.styles-module_slider__Y4O-v::-webkit-slider-thumb:active {\r\n}\r\n\r\n::-moz-range-thumb:active {\r\n}\r\n\r\n.styles-module_icon__1apXm {\r\n\tfont-size: 0.9rem;\r\n\tmargin-right: 5px;\r\n}\r\n\r\n.styles-module_icon__1apXm * {\r\n\tstroke: var(--primaryColor);\r\n\tcolor: var(--primaryColor);\r\n}\r\n");const Lt=e=>{var{data:n,onChange:r,icon:s,styleOptions:i}=e,o=z(e,["data","onChange","icon","styleOptions"]);return t.createElement("div",Object.assign({className:zt},o),s&&t.createElement("div",{className:Nt},s),t.createElement("input",{className:At,min:n.min,max:n.max,step:n.step,type:"range",value:n.value,onChange:r}))};var Dt="styles-module_container__69qRW",Ht="styles-module_optionsWrapper1__OJ-aO",$t="styles-module_optionsWrapper2__5V17-",Vt="styles-module_icon__7uc9b",Bt="styles-module_overlayContainer__kuM3h",Ut="styles-module_visible__KInGF";function Ft(t){return m({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#607D8B",d:"M39.6,27.2c0.1-0.7,0.2-1.4,0.2-2.2s-0.1-1.5-0.2-2.2l4.5-3.2c0.4-0.3,0.6-0.9,0.3-1.4L40,10.8 c-0.3-0.5-0.8-0.7-1.3-0.4l-5,2.3c-1.2-0.9-2.4-1.6-3.8-2.2l-0.5-5.5c-0.1-0.5-0.5-0.9-1-0.9h-8.6c-0.5,0-1,0.4-1,0.9l-0.5,5.5 c-1.4,0.6-2.7,1.3-3.8,2.2l-5-2.3c-0.5-0.2-1.1,0-1.3,0.4l-4.3,7.4c-0.3,0.5-0.1,1.1,0.3,1.4l4.5,3.2c-0.1,0.7-0.2,1.4-0.2,2.2 s0.1,1.5,0.2,2.2L4,30.4c-0.4,0.3-0.6,0.9-0.3,1.4L8,39.2c0.3,0.5,0.8,0.7,1.3,0.4l5-2.3c1.2,0.9,2.4,1.6,3.8,2.2l0.5,5.5 c0.1,0.5,0.5,0.9,1,0.9h8.6c0.5,0,1-0.4,1-0.9l0.5-5.5c1.4-0.6,2.7-1.3,3.8-2.2l5,2.3c0.5,0.2,1.1,0,1.3-0.4l4.3-7.4 c0.3-0.5,0.1-1.1-0.3-1.4L39.6,27.2z M24,35c-5.5,0-10-4.5-10-10c0-5.5,4.5-10,10-10c5.5,0,10,4.5,10,10C34,30.5,29.5,35,24,35z"}},{tag:"path",attr:{fill:"#455A64",d:"M24,13c-6.6,0-12,5.4-12,12c0,6.6,5.4,12,12,12s12-5.4,12-12C36,18.4,30.6,13,24,13z M24,30 c-2.8,0-5-2.2-5-5c0-2.8,2.2-5,5-5s5,2.2,5,5C29,27.8,26.8,30,24,30z"}}]})(t)}Z(".styles-module_container__69qRW {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\twidth: 100%;\r\n\tpadding-bottom: 13px;\r\n}\r\n\r\n.styles-module_optionsWrapper1__OJ-aO {\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\talign-items: flex-end;\r\n}\r\n.styles-module_optionsWrapper2__5V17- {\r\n\twidth: 200px;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-end;\r\n\talign-items: center;\r\n}\r\n\r\n.styles-module_icon__7uc9b {\r\n\tfont-size: 1.1em;\r\n\tpadding: 0px;\r\n\tcursor: pointer;\r\n\ttransition: all 0.4s ease-out;\r\n}\r\n\r\n.styles-module_icon__7uc9b path {\r\n\tfill: var(--primaryColor);\r\n}\r\n.styles-module_icon__7uc9b:hover path {\r\n\tfill: var(--secondaryColor);\r\n}\r\n\r\n.styles-module_overlayContainer__kuM3h {\r\n\topacity: 0;\r\n\tpointer-events: none;\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 46px;\r\n\tbottom: 0px;\r\n\tright: 0px;\r\n\tbackground-color: var(--bgColor);\r\n\tcolor: var(--primaryColor);\r\n\tz-index: 100;\r\n\tdisplay: flex;\r\n\tjustify-content: start;\r\n\tflex-direction: column;\r\n\talign-items: start;\r\n\tflex-wrap: wrap;\r\n\ttransition: all 0.2s linear;\r\n\tpadding: 0px 0px 0px 10px;\r\n\toverflow-y: auto;\r\n}\r\n\r\n.styles-module_overlayContainer__kuM3h label {\r\n\tdisplay: flex;\r\n\tpadding: 0px;\r\n\tmargin: 0px;\r\n}\r\n\r\n.styles-module_overlayContainer__kuM3h input {\r\n\tcursor: pointer;\r\n}\r\n\r\n.styles-module_overlayContainer__kuM3h h5 {\r\n\tpadding: 0px;\r\n\tmargin: 0px;\r\n\tfont-size: 0.6em;\r\n\tmargin-left: 1px;\r\n\tfont-weight: normal !important;\r\n\tline-height: 20px !important;\r\n}\r\n\r\n.styles-module_visible__KInGF {\r\n\topacity: 1;\r\n\tpointer-events: all;\r\n}\r\n");const Gt=()=>{const{reader:e}=V(),{state:n,dispatch:r}=$(),{styleOptions:s}=B(),{voices:i,isSettingsVisible:o,settings:{voiceURI:a,volume:l,rate:c},options:{isChunksModeOn:h,isHighlightTextOn:u,isPreserveHighlighting:d}}=n,p=()=>{r(C("SET_IS_SETTINGS_VISIBLE",!o))};return t.createElement("div",{className:Dt},t.createElement("div",{className:Ht},t.createElement(jt,{name:"rate",options:[{value:"0.5",name:"0.5x"},{value:"0.75",name:"0.75x"},{value:"1",name:"1x"},{value:"1.25",name:"1.25x"},{value:"1.5",name:"1.5x"},{value:"2",name:"2x"}],onChange:t=>{null==e||e.changeSettings({rate:+t}),r(I((null==e?void 0:e.state.duration)||0))},value:c.toString(),defaultValue:"1",title:"Rate",styleOptions:s}),t.createElement(jt,{name:"voice",options:i,onChange:t=>{null==e||e.changeSettings({voiceURI:t})},value:a||"",defaultValue:"1",title:"Voices",styleOptions:s}),t.createElement(Ft,{className:Vt,onPointerDown:p})),t.createElement("div",{className:$t},t.createElement(Lt,{icon:t.createElement(f,null),onChange:t=>{const n=t.target;null==e||e.changeSettings({volume:+n.value})},data:{min:"0.1",max:"1",step:"0.1",value:l,unit:"%"},styleOptions:s})),t.createElement("div",{className:`${Bt} ${o&&Ut}`,onPointerDown:p},t.createElement("label",{htmlFor:"preserve-option",onPointerDown:t=>t.stopPropagation()},t.createElement("input",{id:"preserve-option",type:"checkbox",checked:d,onChange:t=>{const n=t.target;null==e||e.changeOptions({isPreserveHighlighting:n.checked})}}),t.createElement("h5",null,"Preserve Highlighting")),t.createElement("label",{htmlFor:"highlight-option",onPointerDown:t=>t.stopPropagation()},t.createElement("input",{id:"highlight-option",type:"checkbox",checked:u,onChange:t=>{const n=t.target;null==e||e.changeOptions({isHighlightTextOn:n.checked})}}),t.createElement("h5",null,"Highlight Text")),t.createElement("label",{htmlFor:"mode-option",onPointerDown:t=>t.stopPropagation()},t.createElement("input",{id:"mode-option",type:"checkbox",checked:h,onChange:t=>{if(null==e?void 0:e.state.isMobile)return;const n=t.target;null==e||e.changeOptions({isChunksModeOn:n.checked})}}),t.createElement("h5",null,"Chunks Mode"))))},Zt=()=>{const{reader:t}=V(),{dispatch:e}=$();s((()=>{window.speechSynthesis.cancel(),null==t||t.init().then((t=>{var n;const r=null===(n=t.state.voices)||void 0===n?void 0:n.map((t=>{var e;return{name:null===(e=t.name)||void 0===e?void 0:e.replace(/(Microsoft\s)|(Online\s)|(\(Natural\))|(\s-.*$)/gm,""),value:t.voiceURI}}));e(C("SET_VOICES",r)),e((t=>C("SET_NUMBER_OF_WORDS",t))(t.state.numberOfWords)),e(I(t.state.duration)),e(R(t.settings)),e(W(t.options))})).catch((t=>console.log(t)))}),[])};var qt="styles-module_container__xkMLR",Yt="styles-module_visible__ZUiLT",Jt="styles-module_minimized__W5TJy";Z(".styles-module_container__xkMLR {\r\n\twidth: 300px;\r\n\theight: 125px;\r\n\tright: -2000px;\r\n\tfont-size: 16px;\r\n\tposition: fixed;\r\n\tz-index: 1000;\r\n\tbottom: 5px;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\ttransition: all 200ms linear;\r\n\tborder-radius: 5px;\r\n\tbox-shadow: 0px 0px 10px 2px #aaa;\r\n\tpadding: 15px;\r\n\tbackground-color: var(--bgColor);\r\n\tfont-family: Arial, sans-serif !important;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.styles-module_container__xkMLR * {\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.styles-module_visible__ZUiLT {\r\n\tright: 10px;\r\n}\r\n\r\n.styles-module_minimized__W5TJy {\r\n\twidth: 150px;\r\n\theight: 100px;\r\n}\r\n");const Qt=()=>{const{state:e}=$(),{isMinimized:n,isVisible:r}=e;return(()=>{const{styleOptions:t}=B();s((()=>{for(const e of Object.entries(t))document.documentElement.style.setProperty(`--${e[0]}`,e[1])}),[t])})(),(()=>{const{reader:t}=V(),{state:e,dispatch:n}=$(),{isMinimized:r,isVisible:i,isReading:o,isLoading:l}=e,{bindReader:c}=B(),h=a((()=>({showReader:()=>{n(w(!0))},hideReader:()=>{n(w(!1))},minimizeReader:()=>{n(k(!0))},maximizeReader:()=>{n(k(!1))},play:()=>{(null==t?void 0:t.isPaused())?null==t||t.resume():null==t||t.play("start").then((()=>{n(E(!1))}))},pause:()=>null==t?void 0:t.pause()})),[n,t]);s((()=>{c&&"function"==typeof c&&c({isMinimized:r,isVisible:i,isReading:o,isLoading:l},h)}),[c,n,h,l,r,o,i])})(),Zt(),t.createElement("div",{className:`${qt} ${r&&Yt} ${n&&Jt}`},t.createElement(ot,null),t.createElement(St,null),t.createElement(et,null),!n&&t.createElement(Gt,null))},Kt=({options:e,styleOptions:n,textContainer:r,bindReader:s})=>t.createElement(U,{value:{options:e,styleOptions:n,textContainer:r,bindReader:s}},t.createElement(G,null,t.createElement(F,null,t.createElement(Qt,null))));Kt.defaultProps={options:{language:"en"},styleOptions:{primaryColor:"#00D",secondaryColor:"#55F",bgColor:"#FFF",textColor:"#222",highlightColor1:"#98AFC7",highlightColor2:"#737CA1"}};const Xt=()=>{const[t,e]=i({}),[n,r]=i({}),s=o(((t,n)=>{r(t),e(n)}),[r,e]);return{handlers:t,state:n,bindReader:s}};export{Kt as default,Xt as useTextReader};
//# sourceMappingURL=index.es.js.map
